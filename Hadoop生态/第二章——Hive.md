# 第二章——Hive

### 一. Hive简介

#### 1.1 hive出现的原因

视频网站每天产生海量的结构化日志数据，为了对这些数据进行管理，且因机器学习的需求，产生了hive这门技术，并继续发展成为一个成功的Apache项目。



#### 1.2 什么是hive

hive是构建在Hadoop上的数据仓库工具（框架），可以将结构化的数据文件映射成一张数据表，并可以使用类sql的方式来对这样的数据文件进行读、写以及管理（包括元数据）。这套HIVE SQL简称HQL。hive的执行引擎可以是MR、Spark以及Tez。

如果执行引擎是MapReduce的话，hive会将HQL翻译成MR进行数据的计算。用户可以使用命令行工具或JDBC驱动程序来连接到hive。



#### 1.3 为什么使用hive

因为直接使用MapReduce需要面临以下问题：

- 人员学习成本高
- 项目周期要求太短
- MapReduce实现复杂查询逻辑开发难度大



#### 1.4 hive的优缺点

1）hive的优点

- 学习成本低
  - 提供类SQL查询语法HQL（简单、容易上手），避免直接写MapReduce（适合java语音不好的，sql熟练的人）
- 可扩展性好
  - 为超大数据集设计了计算/扩展能力（MR作为计算引擎，HDFS作为而存储系统），Hive可以自由的扩展集群的规模，一般情况下不需要重启服务。
- 适合做离线分析处理（OLAP）
  - Hive的执行延迟比较高，因此Hive常用于数据分析，对实时性要求不高的场合。
- 延展性好
  - Hive支持用户自定义函数，用户可以根据自己的需求来实现自己的函数。
- 良好的容错性
  - 某个数据节点出现问题HQL仍可完成执行。
- 统计管理
  - 提供了统一的元数据管理

2）hive的缺点

- hive的HQL表达能力有限
  - 迭代式算法无法表达，比如PageRank（网页排名）
  - 数据挖掘方面，比如KMeans（k均值聚类算法）
- hive的效率比较低
  - hive自动生成的MapReduce作业，通常情况下不够智能化
  - hive调优比较苦难，粒度较粗

