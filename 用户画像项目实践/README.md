# README

# 用户画像

### 一.项目背景

> 你将掌握的技术：标签存储、中文分词、标签向量化、企业工程实施、向量搜索，以解决企业人群圈定、相似用户搜索。
>
> **WHAT:**用户画像是指根据用户的属性、用户偏好、生活习惯、用户行为等信息而抽象出来的标签化用户模型。 通俗说就是给用户打标签，而标签是通过对用户信息分析而来的高度精炼的特征标识。 
>
> **WHY:**电商领域中，有上百万的商品和用户，哪些商品应该推送给哪些客户，这就要知道商品画像和用户画像，与之一一对应就能推送到有效的商品促成购买。
>
> ​          商品画像往往可以在商家上架时要求商家添加各种属性，而且他们也很乐意这么做，但是让用户一开始就填自己的画像显然不现实，一是非常麻烦二是用户需求会一直变，今天想要这个明天就想要那个了。 
>
> ​           而这个项目就是为了解决这一大痛点，利用用户的看的内容建设画像，并随时更新，且基于用户之间相似性去推荐商品。
>
> **HOW:** 如何得到不同用户的画像（或物品的画像），基于TF-IDF和Word2Vec技术，把用户看的内容分类分向量，以此来得到用户的画像，且计算用户之间的相似性。

#### 1.介绍

想要做用户画像必须以数据仓库作为基础（数据仓库-OLAP引擎）。一般在电商平台或者头条等会有广告投放业务，我们需要将广告展示给不同的用户，不同用户一定是对不同广告感兴趣的，如何才能给到用户想看的？我们需要不停的给用户贴标签（根据用户行为将他/她感兴趣的记录下来）。标签在用户画像里是给机器看的（向量）。

> 标签包含基本属性、行为等，每个标签也要有排名之分，因为有时候用户是不小心点了那个内容，而有时候看一个内容看了很久。

#### 2.OLAP对比OTIP

OLTP(Online Transcation Processing, 联机式事务处理): Java开发，强调对事务的管理，如几个业务之间的一致性等。

OLAP(Online Analytical Processing, 联机式分析处理): 数据分析，强调分析数据以得出业务价值，增删改查会比较多。

#### 3.画像&向量(标签)

这里的标签同时也指向量

> 基础标签：性别、年龄、手机号码等
>
> 高级标签：收入、浏览喜好（如游戏的王者荣耀、欧洲足球等）

**向量：**（也称为欧几里得*向量*、几何*向量*、矢量），指具有大小（magnitude）和方向的量。它可以形象化地表示为带箭头的线段。可以简单理解为它就代表这个用户的画像信息，以**数组**的形式。

> **数组：**有一维数组[12, 52, 11]，也有这样的多维数组
>
> [52, 0.2]
>
> [-0.123, 2]

**HOW:**如何构建用户画像（标签/向量）

1. 对原始数据进行基础ETL就可以得出标签

2. 物品打标签，然后获取用户在这些标签上的历史行为

3. 利用算法把词变成向量

   > TF-IDF、Word2Vec等

4. 把标签存储起来

   > BitMap。
   >
   > **WHAT:**位图或者说基于位的隐射，用bit位来标记某个元素对应的Value，而key即是该元素，即要表达{1, 2, 4, 6}只需要这么存即可
   >
   > | 0    | 1    | 0    | 1    | 0    | 1    | 1    | 0    |
   > | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   > | 7    | "6"  | 5    | "4"  | 3    | "2"  | "1"  | 0    |
   >
   > **而这仅仅是1 bit**，如何查找等更多细节参考https://www.cnblogs.com/cjsblog/p/11613708.html
   >
   > **WHY:**在20亿个随机数中找出某个数，判断它是否在其中。那么量就是20亿个int，int占4个字节，1字节=8位（1 byte=8 bit）。
   >
   > ​    即=20亿×4/1024/1024≈7.6G。
   >
   > ​    而用BitMap则=2000000000/8/1024/1024/1024)≈0.233G。

#### 4.表

##### 4.1涉及的表

| 项目 | 数据库   | 表           | 描述          | 本项目是否使用 |
| ---- | -------- | ------------ | ------------- | -------------- |
| 采集 | ods_news | news         | 行为数据      | 否             |
| 采集 | ods_news | news_article | 内容数据      | 是             |
| 采集 | ods_news | news_parquet | 行为数据      | 否             |
| 采集 | ods_news | meta         | mysql元信息   | 否             |
| 采集 | ods_news | ad_info      | mysql广告信息 | 否             |
| dw   | ods_news | user         | 用户表        | 是             |
| dw   | ods_news | event        | 行为时间表    | 是             |
| dw   | dwb_news | rsu          | 留存率加速表  | 否             |

> 目前数仓有的表

##### 4.2人群圈定、相似用户搜索

### 二.架构

